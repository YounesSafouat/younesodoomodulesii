<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- WooCommerce Import Wizard Form View -->
        <record id="view_woocommerce_import_wizard_form" model="ir.ui.view">
            <field name="name">woocommerce.import.wizard.form</field>
            <field name="model">woocommerce.import.wizard</field>
            <field name="arch" type="xml">
                <form string="Import Products from WooCommerce">
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="draft,importing,done"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>Import Products from WooCommerce</h1>
                        </div>
                        
                        <group>
                            <group>
                                <field name="connection_id" readonly="1"/>
                                <field name="total_products" readonly="1"/>
                                <field name="import_limit" invisible="state != 'draft'"/>
                                <field name="batch_size" invisible="state != 'draft'"/>
                            </group>
                            <group>
                                <field name="import_categories" invisible="state != 'draft'"/>
                                <field name="import_images" invisible="state != 'draft'"/>
                                <field name="import_attributes" invisible="state != 'draft'"/>
                            </group>
                        </group>
                        
                        <!-- Import Behavior Options -->
                        <group string="Import Behavior" invisible="state != 'draft'">
                            <group>
                                <field name="update_existing" invisible="state != 'draft'"/>
                                <field name="overwrite_existing" invisible="state != 'draft'"/>
                            </group>
                            <group>
                                <div class="alert alert-info" style="margin-top: 10px;">
                                    <strong>Note:</strong><br/>
                                    • <strong>Update if Exists:</strong> Updates existing products with new data<br/>
                                    • <strong>Overwrite Existing:</strong> Deletes and recreates products<br/>
                                    • If both unchecked: Skips existing products
                                </div>
                            </group>
                        </group>
                        
                        <!-- Batch Progress Information -->
                        <group invisible="state == 'draft'" string="Batch Progress">
                            <group string="Status">
                                <div style="margin-bottom: 10px;">
                                    <strong>Current Status:</strong><br/>
                                    Batch <field name="batches_completed" readonly="1" class="oe_inline"/> of 
                                    <field name="total_batches" readonly="1" class="oe_inline"/>
                                </div>
                            </group>
                            <group>
                                <field name="imported_count" readonly="1"/>
                                <field name="error_count" readonly="1"/>
                            </group>
                        </group>
                        
                        <!-- Progress Bar Section -->
                        <group invisible="state not in ['importing', 'done']">
                            <group colspan="2">
                                <field name="progress_message" readonly="1" nolabel="1" 
                                       style="font-weight: bold; color: #007bff; font-size: 14px;"/>
                                <separator string="Import Progress"/>
                                <field name="progress_percentage" readonly="1" widget="progressbar" 
                                       options="{'title': 'Progress'}"/>
                                <div style="margin-top: 10px;">
                                    <strong>Progress:</strong>
                                    <field name="progress_current" readonly="1" class="oe_inline"/> / 
                                    <field name="progress_total" readonly="1" class="oe_inline"/> products
                                </div>
                            </group>
                        </group>
                        
                        <notebook invisible="state not in ['importing', 'done']">
                            <page string="Import Log" name="log">
                                <field name="log_message" readonly="1" widget="text" nolabel="1"/>
                            </page>
                        </notebook>
                        
                    </sheet>
                    <footer>
                        <!-- Draft State: Show Start Import Button -->
                        <button name="action_start_import" 
                                type="object" 
                                string="Start Import" 
                                class="btn-primary" 
                                invisible="state != 'draft'"
                                confirm="Are you sure you want to start importing products from WooCommerce? This will process the products according to your settings."/>
                        
                        <!-- Importing State: Show Process Next Batch Button -->
                        <button name="action_process_next_batch" 
                                type="object" 
                                string="Process Next Batch" 
                                class="btn-success" 
                                invisible="state != 'importing'"/>
                        
                        <!-- Done State: Show View Products Button -->
                        <button name="action_view_imported_products" 
                                type="object" 
                                string="View Imported Products" 
                                class="btn-success" 
                                invisible="state != 'done'"/>
                        
                        <!-- Always Show Cancel/Close Button -->
                        <button string="Close" 
                                class="btn-secondary" 
                                special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- WooCommerce Import Wizard Action -->
        <record id="action_woocommerce_import_wizard" model="ir.actions.act_window">
            <field name="name">Import Products from WooCommerce</field>
            <field name="res_model">woocommerce.import.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="context">{}</field>
        </record>

    </data>
</odoo>
